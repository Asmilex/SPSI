| Paso                                                                      | **Bob**                                                                      | **Alice**                                                                                                                                                                                                                                                                 |
|:--------------------------------------------------------------------------|------------------------------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **1. Bob genera su clave privada.** <br> Directorio: `/home/bob`          | `openssl genrsa -out bob@example.com.key.pem 2048`                           | .                                                                                                                                                                                                                                                                         |
| **1. Bob genera su solicitud de firma de certificado (CSR)**              | `openssl req -new -key bob@example.com.key.pem -out bob@example.com.csr.pem` | .                                                                                                                                                                                                                                                                         |
| **2. Bob envía su CSR a alice**                                           | :email:                                                                      | *Alice introduce el certificado en `ca/intermediate/csr`*                                                                                                                                                                                                                 |
| **3. Alice firma el certificado de usuario**  <br> Directorio: `/root/ca` | .                                                                            | `openssl ca -config intermediate/openssl.cnf -extensions usr_cert -notext -md sha256 -in intermediate/csr/bob@example.com.csr.pem -out intermediate/certs/bob@example.com.cert.pem -subj "/CN=bob@example.com"`                                                           |
| **4. Alice comprueba que el certificado es válido**                       | .                                                                            | `openssl verify -CAfile intermediate/certs/ca-chain.cert.pem intermediate/certs/bob@example.com.cert.pem`                                                                                                                                                                 |
| **5. Alice mira el archivo `index.txt`**                                  | .                                                                            | `cat intermediate/index.txt`                                                                                                                                                                                                                                              |
| **6. Bob se porta mal**                                                   | :smiling_imp:                                                                | .                                                                                                                                                                                                                                                                         |
| **7. Alice revoca el certificado de Bob**                                 | .                                                                            | `openssl ca -config intermediate/openssl.cnf -revoke intermediate/certs/bob@example.com.cert.pem`                                                                                                                                                                         |
| **8. Alice comprueba que se ha eliminado de `index.txt`**                 | .                                                                            | `cat intermediate/index.txt`                                                                                                                                                                                                                                              |
| **9. Alice vuelve a recrear la CRL**                                      | .                                                                            | `openssl ca -config intermediate/openssl.cnf -gencrl -out intermediate/crl/intermediate.crl.pem` <br> `openssl verify -CAfile intermediate/certs/ca-chain.cert.pem -CRLfile intermediate/crl/intermediate.crl.pem -crl_check intermediate/certs/bob@example.com.cert.pem` |
| **10. Error porque el certificado está revocado**                         | :weary:                                                                      | :smirk:                                                                                                                                                                                                                                                    :sunglasses:   |
